/*!
************************************************************************************************************************
* @file hal_sram.c
* @brief
* @details
* @author Lews Hammond
* @date 2019-8-9
************************************************************************************************************************
*/


#include "hal_sram.h"

#if (EXTERN_SRAM_ENABLE == D_STD_ENABLE)

static const uint8_t SRamTestData[128] =
{
    0x55, 0x12, 0xAA, 0x32, 0xCC, 0x79, 0x99, 0xAF,
    0x5A, 0x2C, 0xAF, 0x02, 0x4C, 0xF0, 0x67, 0x90,
    0xD1, 0x92, 0x13, 0x32, 0xCC, 0x79, 0x99, 0x25,
    0xD2, 0x19, 0x46, 0x32, 0xCC, 0x79, 0x99, 0x56,
    0x55, 0x16, 0x09, 0x32, 0xCC, 0x79, 0x99, 0x7F,
    0x27, 0x42, 0x00, 0x32, 0xCC, 0x79, 0x99, 0xCD,
    0x32, 0x82, 0x00, 0x32, 0xCC, 0x79, 0x99, 0xAD,
    0xC3, 0x18, 0xA0, 0x32, 0xCC, 0x79, 0x99, 0xDA,
    0xCD, 0x18, 0x0A, 0x32, 0xCC, 0x79, 0x99, 0xD5,
    0xA5, 0x32, 0x08, 0x32, 0xCC, 0x79, 0x99, 0xF3,
    0x7A, 0x65, 0x65, 0x32, 0xCC, 0x79, 0x99, 0xC3,
    0xAC, 0x35, 0x13, 0x32, 0xCC, 0x79, 0x99, 0x13,
    0xFD, 0x56, 0xF2, 0x32, 0xCC, 0x79, 0x99, 0x74,
    0x68, 0x14, 0xF4, 0x32, 0xCC, 0x79, 0x99, 0x79,
    0x79, 0x91, 0x59, 0x61, 0xC7, 0x7A, 0xA2, 0x36,
    0x26, 0x13, 0x09, 0x02, 0x33, 0x77, 0x23, 0x33,
};

/*!
************************************************************************************************************************
* @brief
* @param[in]
* @param[out]
* @returns
* @pre
* @note
* @author Lews Hammond
* @date 2019-8-9
************************************************************************************************************************
*/

StdBoolean_t Hal_SramInit(void)
{
    StdBoolean_t tInitSta = D_STD_FALSE;
    uint8_t tBuf[128] = {0};

    Drv_SramInit();
    memcpy(tBuf, SRamTestData, 128);
    Drv_SramWrite(tBuf, 0x00, 128);
    memset(tBuf, 0, 128);
    Drv_SramRead(tBuf, 0x00, 128);

    if(memcmp(tBuf, SRamTestData, 128) == 0)
    {
        tInitSta = D_STD_TRUE;
    }

    return tInitSta;
}

#endif

